<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - Time Tracking System</title>
    <link rel="icon" href="favicon.svg" type="image/svg+xml">
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/accessibility.css">
</head>
<body>
    <!-- Accessibility Controls -->
    <button id="accessibility-toggle" 
            class="floating-btn" 
            aria-label="Toggle accessibility panel"
            aria-expanded="false"
            aria-controls="accessibility-panel">
        <span aria-hidden="true">♿</span>
        <span class="sr-only">Accessibility Settings</span>
    </button>

    <div id="accessibility-panel" class="accessibility-panel" role="region" aria-label="Accessibility settings" hidden>
        <h2 id="accessibility-heading">Accessibility Settings</h2>
        <div class="accessibility-controls">
            <div class="control-group">
                <label for="screen-reader-toggle">
                    <input type="checkbox" id="screen-reader-toggle" checked>
                    Screen Reader Announcements
                </label>
            </div>
            <div class="control-group">
                <label for="high-contrast-toggle">
                    <input type="checkbox" id="high-contrast-toggle">
                    High Contrast Mode
                </label>
            </div>
            <div class="control-group">
                <label for="text-size">Text Size:</label>
                <select id="text-size" aria-label="Select text size">
                    <option value="normal">Normal (100%)</option>
                    <option value="large">Large (125%)</option>
                    <option value="xlarge">Extra Large (150%)</option>
                    <option value="xxlarge">Very Large (200%)</option>
                </select>
            </div>
            <div class="control-group">
                <label for="button-size">Button Size:</label>
                <select id="button-size" aria-label="Select button size">
                    <option value="normal">Normal</option>
                    <option value="large">Large</option>
                    <option value="xlarge">Extra Large</option>
                </select>
            </div>
            <div class="control-group">
                <label for="focus-indicator">
                    <input type="checkbox" id="focus-indicator" checked>
                    Enhanced Focus Indicators
                </label>
            </div>
            
            <hr style="margin: 1rem 0; border: none; border-top: 1px solid #e2e8f0;">
            
            <h3 style="font-size: 0.9rem; margin-bottom: 0.5rem; color: #4a5568;">Speech Settings</h3>
            
            <div class="control-group">
                <label for="speech-rate">Speech Rate:</label>
                <input type="range" id="speech-rate" min="0.5" max="2" step="0.1" value="1" aria-label="Adjust speech rate">
                <span id="speech-rate-value">1.0x</span>
            </div>
            
            <div class="control-group">
                <label for="speech-pitch">Speech Pitch:</label>
                <input type="range" id="speech-pitch" min="0.5" max="2" step="0.1" value="1" aria-label="Adjust speech pitch">
                <span id="speech-pitch-value">1.0x</span>
            </div>
            
            <div class="control-group">
                <label for="speech-volume">Speech Volume:</label>
                <input type="range" id="speech-volume" min="0" max="1" step="0.1" value="1" aria-label="Adjust speech volume">
                <span id="speech-volume-value">100%</span>
            </div>
            
            <div class="control-group">
                <button id="test-speech" class="btn btn-secondary" style="width: 100%; margin-top: 0.5rem;">Test Speech</button>
            </div>
        </div>
    </div>

    <!-- Live Region for Screen Reader Announcements -->
    <div id="sr-announcements" class="sr-only" role="status" aria-live="polite" aria-atomic="true"></div>

    <!-- Navigation -->
    <nav class="main-nav" role="navigation" aria-label="Main navigation">
        <div class="nav-container">
            <h1 class="nav-title">Time Tracker</h1>
            <ul class="nav-menu">
                <li><a href="dashboard.html" aria-current="page">Dashboard</a></li>
                <li><a href="timesheet.html">Timesheet</a></li>
                <li><a href="manual-entry.html">Manual Entry</a></li>
                <li><a href="time-off.html">Time Off</a></li>
                <li><button id="logout-btn" class="btn-link">Logout</button></li>
            </ul>
        </div>
    </nav>

    <main class="dashboard-container">
        <!-- Status Dashboard -->
        <section class="status-section" aria-labelledby="status-heading">
            <h2 id="status-heading">Current Status</h2>
            <div class="status-card" role="region" aria-live="polite">
                <div id="status-display" class="status-display">
                    <p class="status-text" id="status-text">Not Clocked In</p>
                    <p class="timer" id="timer" aria-live="polite" aria-atomic="true">--:--:--</p>
                </div>
            </div>
        </section>

        <!-- Clock In/Out Controls -->
        <section class="clock-section" aria-labelledby="clock-heading">
            <h2 id="clock-heading">Time Clock</h2>
            <div class="clock-controls">
                <button id="clock-in-btn" 
                        class="btn btn-primary btn-clock" 
                        aria-label="Clock in to start your work day">
                    <span class="btn-icon" aria-hidden="true">▶</span>
                    <span class="btn-text">Clock In</span>
                </button>
                
                <button id="break-start-btn" 
                        class="btn btn-warning btn-clock" 
                        disabled
                        aria-label="Start break">
                    <span class="btn-icon" aria-hidden="true">⏸</span>
                    <span class="btn-text">Start Break</span>
                </button>
                
                <button id="break-end-btn" 
                        class="btn btn-success btn-clock" 
                        disabled
                        aria-label="End break and resume work">
                    <span class="btn-icon" aria-hidden="true">▶</span>
                    <span class="btn-text">End Break</span>
                </button>
                
                <button id="clock-out-btn" 
                        class="btn btn-danger btn-clock" 
                        disabled
                        aria-label="Clock out to end your work day">
                    <span class="btn-icon" aria-hidden="true">■</span>
                    <span class="btn-text">Clock Out</span>
                </button>
            </div>
        </section>

        <!-- Today's Summary -->
        <section class="summary-section" aria-labelledby="summary-heading">
            <h2 id="summary-heading">Today's Summary</h2>
            <div class="summary-grid">
                <div class="summary-card">
                    <h3>Total Hours</h3>
                    <p class="summary-value" id="total-hours-today">0.0</p>
                    <span class="sr-only">hours worked today</span>
                </div>
                <div class="summary-card">
                    <h3>Break Time</h3>
                    <p class="summary-value" id="break-time-today">0.0</p>
                    <span class="sr-only">hours on break today</span>
                </div>
                <div class="summary-card">
                    <h3>This Week</h3>
                    <p class="summary-value" id="total-hours-week">0.0</p>
                    <span class="sr-only">hours worked this week</span>
                </div>
                <div class="summary-card">
                    <h3>PTO Balance</h3>
                    <p class="summary-value" id="pto-balance">0.0</p>
                    <span class="sr-only">days of PTO remaining</span>
                </div>
            </div>
        </section>

        <!-- Notifications -->
        <section class="notifications-section" aria-labelledby="notifications-heading">
            <h2 id="notifications-heading">Notifications</h2>
            <div id="notifications-list" class="notifications-list" role="list" aria-live="polite">
                <p class="no-notifications">No notifications at this time</p>
            </div>
        </section>

        <!-- Recent Entries -->
        <section class="recent-section" aria-labelledby="recent-heading">
            <h2 id="recent-heading">Recent Time Entries</h2>
            <div class="table-container">
                <table class="data-table" role="table" aria-labelledby="recent-heading">
                    <thead>
                        <tr>
                            <th scope="col">Date</th>
                            <th scope="col">Clock In</th>
                            <th scope="col">Clock Out</th>
                            <th scope="col">Total Hours</th>
                            <th scope="col">Status</th>
                        </tr>
                    </thead>
                    <tbody id="recent-entries">
                        <tr>
                            <td colspan="5" class="no-data">No recent entries</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </section>
    </main>

    <script src="js/pocketbase-client.js"></script>
    <script src="js/accessibility.js"></script>
    <script src="js/dashboard.js"></script>
</body>
</html>
